var log = require('bunyan').createLogger({name: 'index.js'})
var config = require('./config')
var Pusher = require('../index')

function getRandomInt(min, max) {
  return Math.floor(Math.random() * (max - min + 1)) + min;
}

var pusher_options = {
  interval: 10,
  max_events: 4,
  min_events: 1,
}

var pusher = new Pusher(config.account_id, config.key, pusher_options)

pusher.on('log', function (level, message) {
  log[level](message)
})

pusher.addEvent('stevan', {job: 'build', duration: getRandomInt(1, 9)})
pusher.addEvent('stevan', {job: 'build', duration: getRandomInt(1, 9)})
pusher.addEvent('stevan', {job: 'update', duration: getRandomInt(1, 9)})
pusher.addEvent('stevan', {job: 'delete', duration: getRandomInt(1, 9)})
pusher.addEvent('stevan', {job: 'build', duration: getRandomInt(1, 9)})
pusher.addEvent('stevan', {job: 'delete', duration: getRandomInt(1, 9), thinger: 'true'})
